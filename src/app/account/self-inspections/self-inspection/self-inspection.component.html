<mat-toolbar>
  <button mat-icon-button (click)="leave()">
    <mat-icon>arrow_back</mat-icon>
  </button>
  {{selfInspectionsService.selfInspection?.title}}
  <div class="flex"></div>
  <button mat-icon-button class="ml" matTooltip="delete this self-inspection" (click)="deleteSelfInspection()"><mat-icon>delete</mat-icon></button>
</mat-toolbar>
<div class="panel">
  <div id="new-inspection">
    <button mat-stroked-button color="primary" style="margin-right: 12px;" (click)="editSelfInspection()">MODIFY {{selfInspectionsService.selfInspection?.title | uppercase}}</button>
    <button mat-stroked-button color="accent" (click)="startSelfInspection()">START A NEW INSPECTION</button>
  </div>
  <div class="inspections" *ngIf="inspections?.length > 0">
    <div class="info-title">In Progress</div>
    <ng-container *ngFor="let inspection of inspections">
      <div class="row" *ngIf="!inspection.completedAt">
        <h2>{{inspection?.createdAt | date: 'longDate'}}</h2>
        <div class="fill" [matTooltip]="getCompletePercent(inspection)" [ngStyle]="{'width':(inspection.completedPercent*100)+'%'}"></div>
        <div class="flex"></div>
        <button mat-button color="primary" (click)="resumeSelfInspection(inspection)">CONTINUE INSPECTION</button>
      </div>
    </ng-container>
  </div>
  <div class="inspections" *ngIf="inspections?.length > 0">
    <div class="info-title">Completed Inspections</div>
    <ng-container *ngFor="let inspection of inspections">
      <div class="row" *ngIf="inspection.completedAt">
        <h2>{{inspection?.createdAt | date: 'longDate'}}</h2>
        <div class="fill" [matTooltip]="getCompliantPercent(inspection)" [ngStyle]="{'width':(inspection.compliantPercent*100)+'%'}"></div>
        <div class="flex"></div>
        <button mat-button color="primary" (click)="export(inspection)">EXPORT TO PDF</button>
      </div>
    </ng-container>
  </div>
</div>