<mat-toolbar>
  <img class="toolbar-logo" src="/assets/ccLogoDark.png">
  <button mat-icon-button class="toolbar-expand-mobile" (click)="accountService.toggle()"><mat-icon>menu</mat-icon></button>
  <div class="toolbar-title">Badges</div>
  <div class="flex"></div>
  <toolbar-helper></toolbar-helper>
</mat-toolbar>
<div class="window">
  <div class="level" *ngFor="let level of levels">
    <div class="card">
      <div class="card-title"><div>Level {{level.level +1}} Compliance</div><div>{{level.completedAchievementsCount}}/{{level.possibleAchievementsCount}}</div></div>
      <div class="checkpoint" *ngFor="let checkpoint of level.checkpoints">
        <div class="badge" *ngFor="let badge of checkpoint.achievements" [ngClass]="{'color': badge.fill > 0}" (click)="routeOrPop(badge)">
          <div class="badge-img" [matTooltip]="badge.fill + '%'" matTooltipPosition="right">
            <mat-progress-spinner style="position:absolute;left: 0px;top: -1px;stroke:#ffd740 !important" mode="determinate" [value]="badge.fill" diameter="100" strokeWidth="6"></mat-progress-spinner>
            <img class="badge-image" [src]="'/assets/achievements/' + badge.category + '.png'" alt="Compliancechimp">
          </div>
          {{badge.name}}
        </div>
        <div class="fill"><div class="fillbar"><div class="filltext">Checkpoint Progress</div><div class="fillcolor" [ngStyle]="{'width':checkpoint.progress}"></div></div></div>
      </div>
    </div>
    <div class="stats">
      <div class="rank" *ngIf="level.level == 0">
        <div class="card-title r-center">Badges Earned</div>
        <div class="r-img-cont">
          <img class="r-img" src="/assets/achievements/tCount.png">
          <div class="r-count">{{completedCount}}</div>
        </div>
        <div class="card-title r-center">Your Compliance Level</div>
        <div class="r-level">{{complianceLevel}}</div>
      </div>
      <div class="info" [innerHTML]="level.info"></div>
    </div>
  </div>
</div>