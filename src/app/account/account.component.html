<mat-sidenav-container>
  <mat-sidenav #sidenav mode="over">
    <div class="mat-sidenav">
      <div id="header" (click)="bShowAccountInfo = true">
        <div id="name">{{ accountService.aTeam?.name }}</div>
        <mat-icon>expand_more</mat-icon>
      </div>
      <div id="content" (click)="sidenav.toggle()">
        <mat-list>
          <a mat-list-item routerLink="dashboard" routerLinkActive="active"><mat-icon class="sn-icon">supervisor_account</mat-icon>Team</a>
          <a mat-list-item routerLink="achievements" routerLinkActive="active"><mat-icon class="sn-icon">where_to_vote</mat-icon>Badges</a>
          <a mat-list-item routerLink="training" routerLinkActive="active"><mat-icon class="sn-icon">explore</mat-icon>Training</a>
          <a mat-list-item routerLink="surveys" routerLinkActive="active"><mat-icon class="sn-icon">scatter_plot</mat-icon>Surveys</a>
          <a mat-list-item routerLink="self-inspections" routerLinkActive="active"><mat-icon class="sn-icon">import_contacts</mat-icon>Self-Inspection</a>
          <a mat-list-item routerLink="log" routerLinkActive="active"><mat-icon class="sn-icon">assignment</mat-icon>Logs</a>
          <a mat-list-item routerLink="time" routerLinkActive="active"><mat-icon class="sn-icon">schedule</mat-icon>Time</a>
          <a mat-list-item routerLink="incident-reports" routerLinkActive="active"><mat-icon class="sn-icon">assignment_late</mat-icon>Incident Reports</a>
          <a mat-list-item routerLink="event" routerLinkActive="active"><mat-icon class="sn-icon">event_note</mat-icon>Events</a>
          <a mat-list-item routerLink="account" routerLinkActive="active"><mat-icon class="sn-icon">person</mat-icon>Account</a>
          <a mat-list-item *ngIf="accountService.user.isDev" routerLink="overvieww" routerLinkActive="active"><mat-icon class="sn-icon">golf_course</mat-icon>Support</a>
        </mat-list>
      </div>
      <div id="footer">
        <img id="mlogo" src="/assets/ccLogo.png" alt="Compliancechimp" />
        <div class="flex"></div>
        <mat-icon
          class="fi"
          (click)="
            sidenav.toggle();
            accountService.showHelper = false;
            accountService.showFeedback = true
          "
          >feedback</mat-icon
        >
      </div>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <!-- ***** HELPER ***** -->
    <div class="helper" id="helper-color" *ngIf="accountService.showHelper" [@helper]>
      <button mat-icon-button (click)="contrastHelper()" class="helper-vis"><mat-icon>visibility</mat-icon></button>
      <button mat-icon-button class="helper-close" (click)="closeHelper()"><mat-icon>cancel</mat-icon></button>
      <div class="helper-name" id="helper-name-color">{{ accountService.helper?.name }}</div>
      <div class="helper-description" id="helper-description-color" [innerHTML]="accountService.helper?.description"></div>
    </div>
    <div class="helper" *ngIf="accountService.showFeedback" [@helper]>
      <button mat-icon-button class="helper-close" (click)="accountService.showFeedback = false"><mat-icon>cancel</mat-icon></button>
      <div class="helper-name">{{ accountService.feedback?.name }}</div>
      <mat-form-field class="helper-input" color="primary"
        ><textarea
          matInput
          placeholder="help Compliancechimp work harder for you"
          [(ngModel)]="accountService.feedback.description"
        ></textarea
      ></mat-form-field>
      <button
        mat-stroked-button
        class="helper-button"
        style="color: #ffffff;border-color:#ffffff"
        (click)="submitFeedback()"
      >
        SUBMIT
      </button>
    </div>
    <div id="wrapper">
      <div id="left">
        <button mat-icon-button style="margin:12px" (click)="sidenav.open()"><mat-icon style="color:#ffffff">menu</mat-icon></button>
        <div class="side-button" routerLinkActive="bactive" routerLink="dashboard"><mat-icon>supervisor_account</mat-icon>Team</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="achievements"><mat-icon>where_to_vote</mat-icon>Badges</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="training"><mat-icon>explore</mat-icon>Training</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="surveys"><mat-icon>scatter_plot</mat-icon>Surveys</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="self-inspections"><mat-icon>import_contacts</mat-icon>Inspections</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="log"><mat-icon>assignment</mat-icon>Logs</div>
        <div class="side-button" routerLinkActive="bactive" routerLink="time"><mat-icon>schedule</mat-icon>Time</div>
        <div class="flex"></div>
        <div class="side-button" routerLinkActive="bactive" (click)="accountService.showFeedback=false;accountService.showHelper=true"><mat-icon>help_outline</mat-icon>Help</div>
      </div>
      <div id="body">
        <router-outlet></router-outlet>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
<div
  class="account-popup-overlay"
  *ngIf="bShowAccountInfo"
  (click)="bShowAccountInfo = false"
></div>
<div class="account-popup" *ngIf="bShowAccountInfo">
  <div class="row">
    <div class="teams">
      <img
        id="popimage"
        src="{{accountService.aTeam.logoUrl}}"
        onError="src = '/assets/ccLogo.png'"
        alt="Compliancechimp"
      />
      <div class="flex"></div>
      <ng-container *ngFor="let team of accountService.userTeams">
        <img
          *ngIf="team.id !== accountService.aTeam.id"
          [matTooltip]="team.name"
          (click)="
            bShowAccountInfo = false; accountService.setActiveTeam(team.id)
          "
          class="otherteams"
          src="{{team.logoUrl}}"
          onerror="src = '/assets/ccLogo.png'"
          alt="Compliancechimp"
        />
      </ng-container>
    </div>
    <div id="popteamname">{{ accountService.aTeam.name }}</div>
  </div>
  <div id="popteam">{{ accountService.teamUsers.length }} team members</div>
  <div id="popteam">
    member since {{ accountService.aTeam.createdAt | date: "shortDate" }}
  </div>
</div>
<div
  class="account-popup-overlay"
  *ngIf="accountService.bShowProfile"
  (click)="accountService.bShowProfile = false"
></div>
<div class="profile-popup" *ngIf="accountService.bShowProfile">
  <div class="pr">
    <img
      id="pi"
      src="{{accountService.user.profileUrl}}"
      onerror="src = '/assets/face.png'"
      alt="profile"
    />
    <div class="col">
      <div id="pn">{{ accountService.user.name }}</div>
      <div id="pe">{{ accountService.user.email }}</div>
      <button
        mat-button
        color="accent"
        (click)="accountService.bShowProfile = false"
        routerLink="account"
      >
        ACCOUNT
      </button>
      <button
        mat-stroked-button
        style="margin-left: 4px"
        (click)="accountService.logout()"
        color="accent"
      >
        SIGN OUT
      </button>
    </div>
  </div>
</div>
