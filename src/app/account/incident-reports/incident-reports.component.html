<mat-toolbar>
  <img class="toolbar-logo" src="/assets/ccLogoDark.png" />
  <div class="toolbar-title">Incident Reports</div>
  <div class="flex"></div>
  <toolbar-helper></toolbar-helper>
</mat-toolbar>
<div class="window">
  <mat-nav-list>
    <mat-list-item
      *ngFor="let report of incidentReports"
      (click)="selectReport(report)"
    >
      <h1 matLine>{{ report.type }} - {{ report.user?.name }}</h1>
      <p mat-line>{{ report.createdAt | date: "medium" }}</p>
    </mat-list-item>
  </mat-nav-list>
</div>
<div id="assesment-window" *ngIf="aReport" [@report]>
  <mat-toolbar>
    <button mat-icon-button (click)="cancel()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    {{ aReport.type }}
    <div class="flex"></div>
    <button
      mat-icon-button
      class="ml"
      style="opacity:.87"
      matTooltip="Delete the report"
      (click)="delete()"
    >
      <mat-icon>delete</mat-icon>
    </button>
    <button mat-button class="ml" color="primary" (click)="export()">
      EXPORT PDF
    </button>
  </mat-toolbar>
  <div class="panel">
    <div id="user-box">
      <img id="user-img" src="{{aReport.user?.profileUrl}}" />
      <div id="user-col">
        <div id="user-name">{{ aReport.user?.name }}</div>
        <div class="user-info">Job Title: {{ aReport.user?.jobTitle }}</div>
        <div class="user-info">
          Report created at: {{ aReport.createdAt | date: "medium" }}
        </div>
      </div>
      <div class="history">
        <div class="takes">
          Injury Reports submitted: {{ aReport?.previousReports?.length }}
        </div>
      </div>
    </div>
    <div class="questions">
      <div class="question" *ngFor="let q of aReport.questions; let i = index">
        <div class="bubble right color">{{ q.description }}</div>
        <div class="left">
          <div class="person">
            <img class="head" src="{{aReport.user?.profileUrl}}" />
          </div>
          <div class="bubble">
            <div *ngIf="q.type == 'text'" id="answer" class="title">
              {{ q.value }}
            </div>
            <div *ngIf="q.type == 'radio'" id="answer" class="title">
              {{ q.value }}
            </div>
            <div *ngIf="q.type == 'date'" id="answer" class="title">
              {{ q.value.toDate() | date: "medium" }}
            </div>
            <img
              *ngIf="q.type == 'signature'"
              id="sig"
              src="{{q.value}}"
              onerror="src = '/assets/lost.png'"
              alt="Compliancechimp"
            />
            <ng-container *ngIf="q.type == 'photos'"
              ><img
                *ngFor="let image of q.value"
                class="images"
                src="{{image.imageUrl}}"
                alt="Compliancechimp"
            /></ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
